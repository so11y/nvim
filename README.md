# Neovim 配置快捷键文档

## 目录

- [核心快捷键](#核心快捷键)
- [分屏操作](#分屏操作)
- [窗口导航与调整](#窗口导航与调整)
- [Buffer 管理](#buffer-管理)
- [文件树操作](#文件树操作)
- [代码编辑](#代码编辑)
- [代码搜索与跳转](#代码搜索与跳转)
- [LSP 功能](#lsp-功能)
- [Treesitter 文本对象与跳转](#treesitter-文本对象与跳转)

---

## 核心快捷键

| 模式 | 按键 | 功能 |
|------|------|------|
| n | `<Enter>` | 进入插入模式 |
| i | `<Enter>` | 换行 |
| n | `<C-a>` | 全选 |
| n | `<C-n>` | 取消高亮搜索 |
| n | `J` | 下翻半页 |
| n | `K` | 上翻半页 |
| n | `gh` | 跳转到行首 |
| n | `gl` | 跳转到行尾 |

### 禁用按键 (使用 Alt 组合键替代)

| 原按键 | 替代方案 |
|--------|----------|
| `x` (删除字符) | `<A-d>` 删除行 |
| `s` (替换) | `<Enter>` 进入插入模式 |
| `u` (撤销) | `<A-z>` |
| `<C-r>` (重做) | `<A-y>` |
| `dd` (删除行) | `<A-d>` |

### 撤销/重做/跳转

| 模式 | 按键 | 功能 |
|------|------|------|
| n, i, v | `<A-z>` | 撤销 |
| n, i, v | `<A-y>` | 重做 |
| n | `<A-u>` | 后退跳转位置 |
| n | `<A-o>` | 前进跳转位置 |

---

## 分屏操作

| 按键 | 功能 |
|------|------|
| `<leader>sv` | 垂直分屏 |
| `<leader>sh` | 水平分屏 |

---

## 窗口导航与调整

### 窗口跳转 (Ctrl + 方向键)

| 按键 | 功能 |
|------|------|
| `<C-j>` | 跳转到下方窗口 |
| `<C-k>` | 跳转到上方窗口 |
| `<C-h>` | 跳转到左侧窗口 |
| `<C-l>` | 跳转到右侧窗口 |

### 窗口大小调整 (Alt + 方向键)

| 按键 | 功能 |
|------|------|
| `<A-Up>` | 增加窗口高度 |
| `<A-Down>` | 减少窗口高度 |
| `<A-Left>` | 减少窗口宽度 |
| `<A-Right>` | 增加窗口宽度 |

---

## Buffer 管理

| 按键 | 功能 |
|------|------|
| `<A-h>` | 上一 buffer |
| `<A-l>` | 下一 buffer |
| `<A-<>>` | buffer 左移 |
| `<A->>` | buffer 右移 |
| `<A-1>` ~ `<A-9>` | 跳转到对应 buffer |
| `<A-p>` | pin buffer (固定) |
| `<A-w>` | 关闭当前 buffer |

---

## 文件树操作

| 按键 | 功能 |
|------|------|
| `<A-b>` | 切换文件树 |
| `<A-e>` | 定位当前文件 |

---

## 代码编辑

### 移动行/选区

| 模式 | 按键 | 功能 |
|------|------|------|
| n | `<A-j>` | 向下移动行 |
| n | `<A-k>` | 向上移动行 |
| v | `<A-j>` | 向下移动选区 |
| v | `<A-k>` | 向上移动选区 |
| v | `J` | 多行选区下移 |
| v | `K` | 多行选区上移 |

### 删除/剪切

| 模式 | 按键 | 功能 |
|------|------|------|
| n | `<A-d>` | 删除整行 |
| v | `<A-d>` | 删除选区 |
| n | `<A-x>` | 剪切整行到剪贴板 |
| v | `<A-x>` | 剪切选区到剪贴板 |

### 复制/粘贴

| 模式 | 按键 | 功能 |
|------|------|------|
| v | `<A-c>` | 复制到系统剪贴板 |
| n, v | `<A-v>` | 粘贴 |
| i | `<A-v>` | 插入模式粘贴 |

### 保存

| 按键 | 功能 |
|------|------|
| `<A-s>` | 保存文件 |

### 注释

| 模式 | 按键 | 功能 |
|------|------|------|
| n, v | `<A-/>` | 切换注释 |
| n | `gcO` | 在上方插入注释行 |
| n | `gco` | 在下方插入注释行 |
| n | `gcA` | 在行尾追加注释 |

### 代码格式化

| 按键 | 功能 |
|------|------|
| `<A-F>` | 格式化代码 |

### 折叠代码预览

| 按键 | 功能 |
|------|------|
| `<leader>k` | 预览折叠代码 |

---

## 代码搜索与跳转

### Hop (快速跳转)

| 按键 | 功能 |
|------|------|
| `<leader>jw` | 跳转到单词 (光标处) |
| `<leader>sw` | 选中到单词 (光标处) |

### Snacks 工具

| 按键 | 功能 |
|------|------|
| `<leader>fs` | 文件搜索 |
| `<leader>n` | 通知历史 |

---

## LSP 功能

| 按键 | 功能 |
|------|------|
| `gd` | 跳转到定义 |
| `gr` | 查找引用 |
| `<leader>cr` | 重命名 |
| `<leader>ca` | 代码操作菜单 |
| `gdj` | 上一条诊断 |
| `gdk` | 下一条诊断 |
| `<leader>xx` | 工作区诊断列表 |
| `<leader>su` | 撤销历史 |

---

## 其他插件

### 终端

| 按键 | 功能 |
|------|------|
| `<A-t>` | 打开终端 |

### 补全 (nvim-cmp)

| 按键 | 功能 |
|------|------|
| `<A-j>` | 下一条补全建议 |
| `<A-k>` | 上一条补全建议 |
| `<Tab>` | 确认补全 |
| `<CR>` | 确认补全 |

---

## 快捷键速查表

### Alt 组合键

| 按键 | 功能 |
|------|------|
| `A-s` | 保存 |
| `A-f` | 文件内搜索 |
| `A-d` | 删除行 |
| `A-z` | 撤销 |
| `A-y` | 重做 |
| `A-j` | 向下移动 / 下一补全 |
| `A-k` | 向上移动 / 上一补全 |
| `A-i` | 后退跳转 |
| `A-o` | 前进跳转 |
| `A-c` | 复制到剪贴板 |
| `A-v` | 前进跳转 |粘贴 |
| `A-x` | 剪切 |
| `A-/` | 注释/取消注释 |
| `A-b` | 切换文件树 |
| `A-e` | 定位当前文件 |
| `A-w` | 关闭 buffer |
| `A-t` | 前进跳转 |打开终端 |
| `A-p` | Pin buffer |
| `A-h/l` | 上/下一 buffer |
| `A-</>` | 移动 buffer 位置 |

### Ctrl 组合键

| 按键 | 功能 |
|------|------|
| `C-j/k/h/l` | 窗口上下左右跳转 |
| `C-n` | 取消高亮 |
| `C-a` | 全选 |

### Leader 组合键

| 按键 | 功能 |
|------|------|
| `<leader>sv` | 垂直分屏 |
| `<leader>sh` | 水平分屏 |
| `<leader>jw` | Hop 跳单词 |
| `<leader>sw` | Hop 选单词 |
| `<leader>fp` | 项目选择器 |
| `<leader>k` | 折叠预览 |
| `<leader>n` | 通知历史 |
| `<leader>fs` | 文件搜索 |
| `<leader>cr` | 重命名 |
| `<leader>xx` | 诊断列表 |
| `<leader>ca` | 代码操作 |
| `<leader>su` | 撤销历史 |


## Treesitter 文本对象与跳转

> **说明**：
> *   **模式**：`n`=普通模式, `x`=可视模式, `o`=操作符等待模式 (例如按 `d` 后接的按键)
> *   **核心逻辑**：基于语法树智能识别代码结构，而非简单的正则匹配。

### 1. 代码选中 (Select)
*通常在可视模式 `v` 下使用，或配合操作符 `d` (删除)、`c` (修改)、`y` (复制) 使用。*
*例如：`daf` (删除整个函数)、`vis` (选中语句内部)*

| 模式 | 按键 | 功能 |
|:---:|:---|:---|
| nxo | `af` | 选中 **整个** 函数/方法 (Around Function) |
| nxo | `if` | 选中 函数/方法 **内部** (Inside Function) |
| nxo | `al` | 选中 **整个** 循环 (for/while) |
| nxo | `il` | 选中 循环 **内部** |
| nxo | `ad` | 选中 **整个** 条件分支 (if/switch) |
| nxo | `id` | 选中 条件分支 **内部** |
| nxo | `ac` | 选中 **整个** 方法调用 |
| nxo | `ic` | 选中 方法调用的 **参数区域** |
| nxo | `aa` | 选中 **整个** 参数 (包含逗号) |
| nxo | `ia` | 选中 参数 **内容** |
| nxo | `as` | 选中 **整个** 语句/声明 |
| nxo | `is` | 选中 语句/声明 **内容** |
| nxo | `aq` | 选中 **整个** 字符串 (含引号) |
| nxo | `iq` | 选中 字符串 **内容** (不含引号) |

### 2. 代码跳转 (Move)
*支持在普通模式快速跳转，或在可视模式下扩展选区。*
*`gj` = Go Jump (Next), `gk` = Go bacK (Prev)*

| 模式 | 按键 | 功能 |
|:---:|:---|:---|
| nxo | `gjf` | 跳转到 **下一个** 函数/方法 |
| nxo | `gkf` | 跳转到 **上一个** 函数/方法 |
| nxo | `gja` | 跳转到 **下一个** 参数 |
| nxo | `gka` | 跳转到 **上一个** 参数 |
| nxo | `gjd` | 跳转到 **下一个** 条件判断 (if/switch) |
| nxo | `gkd` | 跳转到 **上一个** 条件判断 |
| nxo | `gjl` | 跳转到 **下一个** 循环 |
| nxo | `gkl` | 跳转到 **上一个** 循环 |
| nxo | `gjc` | 跳转到 **下一个** 方法调用 |
| nxo | `gkc` | 跳转到 **上一个** 方法调用 |
| nxo | `gjq` | 跳转到 **下一个** 字符串 |
| nxo | `gkq` | 跳转到 **上一个** 字符串 |
| nxo | `gjs` | 跳转到 **下一个** 语句段落 |
| nxo | `gks` | 跳转到 **上一个** 语句段落 |

### 3. 重复移动与原生查找
*配置中增强了 `;` 和 `,` 的功能，使其不仅能重复 `f/t` 查找，还能重复上面的代码跳转。*

| 模式 | 按键 | 功能 |
|:---:|:---|:---|
| nxo | `;` | **重复** 上一次移动 (包括 f/t 查找 或 gj/gk 跳转) |
| nxo | `,` | **反向重复** 上一次移动 |
| nxo | `f` | 向后查找字符 (原生增强，可被 `;` 重复) |
| nxo | `F` | 向前查找字符 (原生增强，可被 `;` 重复) |
| nxo | `t` | 向后查找字符前 (原生增强，可被 `;` 重复) |
| nxo | `T` | 向前查找字符后 (原生增强，可被 `;` 重复) |

### 4. 代码交换 (Swap)
*用于快速交换参数位置，重构代码时非常有用。*

| 模式 | 按键 | 功能 |
|:---:|:---|:---|
| n | `<leader>ra` | 将当前参数与 **下一个** 参数交换 |
| n | `<leader>rA` | 将当前参数与 **上一个** 参数交换 |